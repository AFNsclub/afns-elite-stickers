<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Leaderboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,#050b1f,#0a1233);
  color:#fff;
}
.container{
  max-width:520px;
  margin:40px auto;
  background:rgba(255,255,255,.06);
  backdrop-filter:blur(10px);
  border-radius:16px;
  padding:22px;
  box-shadow:0 0 25px rgba(0,0,0,.6);
}
h2{text-align:center;margin:0 0 16px}
.motivation{
  text-align:center;
  font-size:14px;
  background:rgba(59,130,246,.15);
  padding:10px;
  border-radius:10px;
  margin-bottom:14px;
}
.list{margin-top:10px}
.row{
  display:grid;
  grid-template-columns:36px 1fr 60px;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius:12px;
  margin-bottom:8px;
  background:rgba(255,255,255,.05);
  cursor:pointer;
  transition:.2s;
}
.row:hover{background:rgba(255,255,255,.1)}
.rank{
  font-weight:bold;
  text-align:center;
}
.name{
  font-size:14px;
}
.points{
  text-align:right;
  font-weight:bold;
  color:#a5b4fc;
}
.t1{color:#ffd700}
.t2{color:#c0c0c0}
.t3{color:#cd7f32}
footer{
  margin-top:18px;
  text-align:center;
  font-size:12px;
  opacity:.6;
}
footer img{height:24px;vertical-align:middle}
footer a{color:#a5b4fc;text-decoration:none}
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  authDomain:"afnsclub.firebaseapp.com",
  projectId:"afnsclub"
});
</script>
</head>

<body>

<div class="container">
  <h2>Leaderboard</h2>

  <div class="motivation" id="motivation"></div>

  <div class="list" id="list"></div>

  <footer>
    <img src="logo.png"><br>
    AFNs Elite Striker |
    <a href="https://www.facebook.com/share/1CTCywTQAj/" target="_blank">
      SI Shohan
    </a>
  </footer>
</div>

<script>
const db = firebase.firestore();

/* MOTIVATION */
const MOTIVATIONS=[
"Every match matters.",
"Discipline beats talent.",
"Focus. Fight. Finish.",
"Winners never quit.",
"Train hard, win easy."
];
motivation.textContent =
  MOTIVATIONS[Math.floor(Math.random()*MOTIVATIONS.length)];

/* LOAD PLAYERS */
db.collection("players").onSnapshot(snap=>{
  let players=[];
  snap.forEach(d=>{
    players.push({uid:d.id,...d.data()});
  });

  players.sort((a,b)=>{
    if((b.wins||0)!==(a.wins||0)) return (b.wins||0)-(a.wins||0);
    if((b.gd||0)!==(a.gd||0)) return (b.gd||0)-(a.gd||0);
    return (b.goals||0)-(a.goals||0);
  });

  list.innerHTML="";
  players.forEach((p,i)=>{
    const r=i+1;
    const row=document.createElement("div");
    row.className="row";
    row.onclick=()=>location.href=
      "public-profile.html?uid="+p.uid;

    const rank=document.createElement("div");
    rank.className="rank";
    rank.textContent="#"+r;
    if(r===1)rank.classList.add("t1");
    if(r===2)rank.classList.add("t2");
    if(r===3)rank.classList.add("t3");

    const name=document.createElement("div");
    name.className="name";
    name.textContent=p.name||"Player";

    const pts=document.createElement("div");
    pts.className="points";
    pts.textContent=(p.wins||0)+"W";

    row.append(rank,name,pts);
    list.appendChild(row);

    // save rank back (optional, safe)
    db.collection("players").doc(p.uid).update({rank:r});
  });
});
</script>

</body>
</html>
