<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Match History</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{
  background:#050b14;
  color:#fff;
  font-family:Segoe UI,sans-serif;
}
.container{
  max-width:500px;
  margin:auto;
  padding:20px;
}
.card{
  background:#0b1622;
  padding:14px;
  border-radius:14px;
  margin-top:12px;
}
.win{border-left:5px solid #4cff8f}
.loss{border-left:5px solid #ff6b6b}
.small{font-size:12px;color:#aaa}
</style>
</head>

<body>
<div class="container">
<h2>ðŸ“œ Match History</h2>
<div id="list"></div>
</div>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  authDomain:"afnsclub.firebaseapp.com",
  projectId:"afnsclub"
});

const auth=firebase.auth(),db=firebase.firestore();

auth.onAuthStateChanged(user=>{
  if(!user){location.href="login.html";return;}
  loadMatches(user.uid);
});

function loadMatches(uid){
  db.collection("matches")
    .where("playerId","==",uid)
    .orderBy("time","desc")
    .onSnapshot(snap=>{
      list.innerHTML="";
      snap.forEach(d=>{
        const m=d.data();
        list.innerHTML+=`
          <div class="card ${m.result}">
            <b>${m.result.toUpperCase()}</b> vs ${m.opponent}<br>
            Score: ${m.score}<br>
            <span class="small">${m.time?.toDate().toLocaleString()}</span>
          </div>
        `;
      });
    });
}
</script>
</body>
</html>
