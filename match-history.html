<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Match History | AFN</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{
  background:#02060c;
  color:#fff;
  font-family:Segoe UI,sans-serif;
}
.container{max-width:460px;margin:auto;padding:20px}
h2{text-align:center;color:#ffd400}

.match{
  background:#0c1b2a;
  border-radius:14px;
  padding:14px;
  margin-top:12px;
  box-shadow:0 0 12px rgba(0,247,255,.25);
}
.win{border-left:5px solid #4cff8f}
.loss{border-left:5px solid #ff6b6b}

small{color:#9aa}
</style>
</head>

<body>
<div class="container">
<h2>üèÜ Match History</h2>

<div id="list"></div>
</div>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  authDomain:"afnsclub.firebaseapp.com",
  projectId:"afnsclub"
});

const auth=firebase.auth();
const db=firebase.firestore();

auth.onAuthStateChanged(user=>{
  if(!user){location.replace("login.html");return;}

  db.collection("matches")
    .where("uid","==",user.uid)
    .orderBy("createdAt","desc")
    .onSnapshot(snap=>{
      list.innerHTML="";
      snap.forEach(doc=>{
        const d=doc.data();
        list.innerHTML+=`
          <div class="match ${d.result}">
            <b>${d.result.toUpperCase()}</b> vs ${d.opponent}<br>
            Score: ${d.score}<br>
            <small>${new Date(d.date).toDateString()}</small>
          </div>
        `;
      });
    });
});
</script>
</body>
</html>
