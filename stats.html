<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AFNS Elite Strikers - Rankings</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
:root{
  --bg-dark:#0a0f21;
  --card-bg:rgba(20,20,40,0.85);
  --neon-cyan:#00f7ff;
  --neon-pink:#ff44aa;
  --neon-yellow:#ffbb33;
  --neon-orange:#ff5500;
  --text:#fff;
}

/* Body & Background */
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:var(--bg-dark);
  color:var(--text);
  text-align:center;
  overflow-x:hidden;
  position:relative;
}

/* Fire & Sparks */
.fire-bg{position:fixed;top:0;left:50%;transform:translateX(-50%);width:300%;height:300%;background:radial-gradient(circle at center,var(--neon-pink),var(--neon-orange), transparent 70%);animation:flare 5s infinite;opacity:0.12;pointer-events:none;z-index:0;}
@keyframes flare{0%{transform:translateX(-50%) scale(1);}50%{transform:translateX(-50%) scale(1.12);}100%{transform:translateX(-50%) scale(1);}}

.spark{position:absolute;width:4px;height:4px;background:var(--neon-yellow);border-radius:50%;opacity:0.8;pointer-events:none;animation:rise 2.5s linear infinite;}
@keyframes rise{0%{transform:translateY(0) scale(1);opacity:0.8;}100%{transform:translateY(-180px) scale(0.3);opacity:0;}}

.logo{width:120px;margin:20px auto;display:block;filter:drop-shadow(0 0 25px var(--neon-cyan));z-index:2;position:relative;}
h1{font-size:38px;margin:10px 0 30px;background:linear-gradient(45deg,var(--neon-pink),var(--neon-cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 15px var(--neon-pink),0 0 15px var(--neon-cyan);font-weight:900;z-index:2;position:relative;}

/* Tabs */
.tabs{margin-bottom:15px;}
.tab-btn{padding:10px 18px;margin:0 3px;border:none;border-radius:10px;font-weight:bold;cursor:pointer;background:rgba(0,255,255,0.05);color:var(--text);transition:.3s;}
.tab-btn.active{background:var(--neon-cyan);color:#000;box-shadow:0 0 15px var(--neon-cyan);}
.season-selector{padding:8px 12px;margin-left:5px;border-radius:8px;border:none;background:rgba(255,255,255,0.1);color:#fff;cursor:pointer;transition:.3s;}
.season-selector:hover{background:var(--neon-pink);color:#000;}

/* Table */
.table-container{width:95%;max-width:900px;margin:auto 0 50px;border-radius:15px;overflow:hidden;box-shadow:0 0 35px var(--neon-cyan);z-index:2;position:relative;background:var(--card-bg);}
table{width:100%;border-collapse:collapse;}
th{padding:16px;font-size:16px;text-transform:uppercase;background:rgba(10,20,40,0.7);color:var(--neon-pink);text-shadow:0 0 5px var(--neon-pink);}
td{padding:14px;font-weight:600;border-bottom:1px solid rgba(255,255,255,0.1);}
tr{opacity:0;transform:translateY(15px);animation:fadeSlide .5s forwards;transition:0.3s;}
@keyframes fadeSlide{to{opacity:1;transform:translateY(0);}}
tr:hover{transform:scale(1.03);background:rgba(0,255,255,0.08);box-shadow:0 0 10px var(--neon-cyan);}
.rank1{background:linear-gradient(120deg,#FFD700,#ffdd55); color:#000; box-shadow:0 0 20px #FFD700;}
.rank2{background:linear-gradient(120deg,#C0C0C0,#e0e0e0); color:#000; box-shadow:0 0 15px #C0C0C0;}
.rank3{background:linear-gradient(120deg,#CD7F32,#e1a55c); color:#000; box-shadow:0 0 15px #CD7F32;}
.medal{font-size:18px;margin-right:5px;}
.player-link{color:inherit;text-decoration:none;transition:.2s;}
.player-link:hover{text-decoration:underline;color:var(--neon-yellow);}
footer{text-align:center;font-size:14px;margin-bottom:20px;color:var(--neon-yellow);font-weight:700;text-shadow:0 0 8px var(--neon-cyan);}
@media(max-width:500px){th,td{font-size:13px;padding:10px;}h1{font-size:28px;margin-bottom:20px;}.logo{width:90px;}}
</style>
</head>
<body>

<div class="fire-bg"></div>
<img src="logo.png" alt="AFNS Logo" class="logo">
<h1>üèÜ AFNS ELITE STRIKERS RANKINGS</h1>

<div class="tabs">
  <button class="tab-btn active" onclick="switchTab('seasonal')">Seasonal</button>
  <button class="tab-btn" onclick="switchTab('alltime')">All-Time</button>
  <select class="season-selector" id="seasonSelect" onchange="loadRanking()" title="Select Season">
    <option value="H1-2026">H1-2026</option>
    <option value="H2-2026">H2-2026</option>
    <option value="H3-2026">H3-2026</option>
  </select>
</div>

<div class="table-container">
<table>
<thead>
<tr>
<th>Rank</th>
<th>Player</th>
<th>Win</th>
<th>Loss</th>
<th>Draw</th>
<th>Rating</th>
</tr>
</thead>
<tbody id="rankingBody"></tbody>
</table>
</div>

<footer>¬© 2026 AFNS Elite Strikers | SI Shohan</footer>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  authDomain:"afnsclub.firebaseapp.com",
  projectId:"afnsclub"
});

const db=firebase.firestore();
const table=document.getElementById("rankingBody");

/* Mini Sparks Generator */
function createSparks(num){
  for(let i=0;i<num;i++){
    const spark=document.createElement('div');
    spark.className='spark';
    spark.style.left=Math.random()*100+'%';
    spark.style.top=100+Math.random()*50+'%';
    spark.style.animationDuration=(1+Math.random()*2)+'s';
    document.body.appendChild(spark);
  }
}
createSparks(25);

/* Tabs & Seasons */
let currentTab='seasonal';
function switchTab(tab){
  currentTab=tab;
  document.querySelectorAll('.tab-btn').forEach(btn=>btn.classList.remove('active'));
  if(tab==='seasonal') document.querySelectorAll('.tab-btn')[0].classList.add('active');
  else document.querySelectorAll('.tab-btn')[1].classList.add('active');
  document.getElementById('seasonSelect').style.display = tab==='seasonal'?'inline-block':'none';
  loadRanking();
}

/* Load Rankings */
function loadRanking(){
  table.innerHTML="";
  const selectedSeason=document.getElementById('seasonSelect').value;
  db.collection("players").get().then(snapshot=>{
    let players=[];
    snapshot.forEach(doc=>{
      const p=doc.data();
      let data;
      if(currentTab==='seasonal'){
        data=p.seasonal?.[selectedSeason] || {rating:0,wins:0,losses:0,draws:0};
      } else {
        data={rating:p.rating||0, wins:p.wins||0, losses:p.losses||0, draws:p.draws||0};
      }
      players.push({id:doc.id, username:p.username||"-", ...data});
    });
    players.sort((a,b)=>b.rating-a.rating);
    players.forEach((p,index)=>{
      let className="",medal="";
      if(index===0){className="rank1";medal="ü•á";}
      else if(index===1){className="rank2";medal="ü•à";}
      else if(index===2){className="rank3";medal="ü•â";}
      table.innerHTML+=`<tr class="${className}" style="animation-delay:${index*0.08}s">
        <td><span class="medal">${medal}</span>${index+1}</td>
        <td><a class="player-link" href="public-profile.html?id=${p.id}">${p.username}</a></td>
        <td>${p.wins}</td>
        <td>${p.losses}</td>
        <td>${p.draws}</td>
        <td>${p.rating}</td>
      </tr>`;
    });
  });
}

// Initial load
switchTab('seasonal');
</script>

</body>
</html>
