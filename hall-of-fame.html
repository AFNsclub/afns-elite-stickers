<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hall of Fame | AFN</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<!-- PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
  margin:0;
  font-family:Segoe UI,sans-serif;
  background:radial-gradient(circle at top,#1b1400,#02060c);
  color:#fff;
}
.container{
  max-width:520px;
  margin:auto;
  padding:18px;
}
h1{
  text-align:center;
  color:#ffd400;
  margin-bottom:10px;
}
button{
  width:100%;
  padding:12px;
  margin:14px 0 18px;
  border:none;
  border-radius:14px;
  background:#ffd400;
  font-weight:700;
  cursor:pointer;
}
.season{
  background:linear-gradient(145deg,#1a1400,#060400);
  border-radius:20px;
  padding:18px;
  margin-bottom:16px;
  box-shadow:0 0 22px rgba(255,215,0,.35);
}
.season h2{
  margin:0 0 10px;
  color:#ffd400;
}
.player{
  display:flex;
  justify-content:space-between;
  padding:10px 12px;
  border-radius:14px;
  background:rgba(255,255,255,.06);
  margin-bottom:8px;
  font-size:14px;
}
.crown{
  color:#ffd400;
  font-weight:700;
}
footer{
  text-align:center;
  font-size:12px;
  opacity:.6;
  margin-top:20px;
}
</style>
</head>

<body>

<div class="container">
  <h1>üëë Hall of Fame</h1>

  <!-- PDF EXPORT -->
  <button onclick="exportPDF()">üìÑ Export Hall of Fame PDF</button>

  <div id="hall"></div>

  <footer>
    AFN's Elite Strikers<br>
    Play Smart ‚Ä¢ Stay Elite
  </footer>
</div>

<script>
/* üî• FIREBASE INIT */
firebase.initializeApp({
  apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  projectId:"afnsclub"
});
const db = firebase.firestore();
const hall = document.getElementById("hall");

/* üìú LOAD HALL OF FAME */
db.collection("hall_of_fame")
  .orderBy("season","desc")
  .onSnapshot(snap=>{
    hall.innerHTML="";
    snap.forEach(doc=>{
      const s = doc.data();
      const box = document.createElement("div");
      box.className = "season";
      box.innerHTML = `<h2>üèÜ Season ${s.season}</h2>`;

      s.champions.forEach((p,i)=>{
        box.innerHTML += `
          <div class="player">
            <div>${i===0 ? "üëë " : ""}${p.name}</div>
            <div class="crown">${p.rating} RP</div>
          </div>
        `;
      });

      hall.appendChild(box);
    });
  });

/* üìÑ EXPORT PDF */
async function exportPDF(){
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();
  let y = 20;

  pdf.setFontSize(18);
  pdf.text("AFN's Elite Strikers", 14, y);
  y += 8;

  pdf.setFontSize(14);
  pdf.text("Hall of Fame", 14, y);
  y += 10;

  const snap = await db.collection("hall_of_fame")
    .orderBy("season","desc")
    .get();

  snap.forEach(doc=>{
    const s = doc.data();

    if(y > 270){
      pdf.addPage();
      y = 20;
    }

    pdf.setFontSize(13);
    pdf.text(`Season ${s.season}`, 14, y);
    y += 6;

    s.champions.forEach((p,i)=>{
      pdf.setFontSize(11);
      pdf.text(
        `${i+1}. ${p.name} ‚Äî ${p.rating} RP`,
        18,
        y
      );
      y += 5;
    });

    y += 6;
  });

  pdf.save("AFN_Hall_of_Fame.pdf");
}
</script>

</body>
</html>
