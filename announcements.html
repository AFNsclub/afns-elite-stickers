<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AFNS Elite Strikers Official Notice Board</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<style>
body{
margin:0;
font-family:Segoe UI;
background:linear-gradient(135deg,#000428,#004e92);
color:white;
text-align:center;
}
header{
padding:25px;
font-size:24px;
font-weight:bold;
color:gold;
}
.container{
width:95%;
max-width:900px;
margin:auto;
margin-top:20px;
}
.card{
background:rgba(255,255,255,0.1);
backdrop-filter:blur(15px);
border-radius:20px;
padding:20px;
margin:20px 0;
text-align:left;
position:relative;
box-shadow:0 0 25px rgba(0,195,255,0.3);
}
.pin{
position:absolute;
top:15px;
right:15px;
background:gold;
color:black;
padding:5px 12px;
border-radius:30px;
font-size:12px;
}
.title{
font-size:18px;
font-weight:bold;
color:#ffd700;
}
.date{
font-size:12px;
color:#ccc;
margin-bottom:10px;
}
.popup{
position:fixed;
bottom:20px;
right:20px;
background:gold;
color:black;
padding:15px;
border-radius:10px;
display:none;
box-shadow:0 0 20px gold;
}
</style>
</head>

<body>

<header>
üèÜ AFNS Elite Strikers Official Notice Board
</header>

<div class="container" id="list"></div>

<div class="popup" id="popup">üîî New Announcement Posted!</div>

<script>

firebase.initializeApp({
apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
authDomain:"afnsclub.firebaseapp.com",
projectId:"afnsclub"
});

const db = firebase.firestore();
const list = document.getElementById("list");
const popup = document.getElementById("popup");

let lastCount = 0;

db.collection("announcements")
.orderBy("pinned","desc")
.orderBy("timestamp","desc")
.onSnapshot(snapshot=>{

if(snapshot.size > lastCount && lastCount!=0){
popup.style.display="block";
setTimeout(()=>popup.style.display="none",4000);
}
lastCount = snapshot.size;

list.innerHTML="";

snapshot.forEach(doc=>{
const data = doc.data();

const card = document.createElement("div");
card.className="card";

card.innerHTML=`
${data.pinned ? '<div class="pin">üìå PINNED</div>' : ''}
<div class="title">${data.title}</div>
<div class="date">${new Date(data.timestamp?.toDate()).toLocaleString()}</div>
<div>${data.message}</div>
`;

list.appendChild(card);
});

});

</script>

</body>
</html>
