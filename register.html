<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Create Player Account</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#020617;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  color:#fff;
}
.card{
  background:#0f172a;
  padding:20px;
  width:320px;
  border-radius:12px;
}
input,button{
  width:100%;
  padding:10px;
  margin:6px 0;
  border:none;
  border-radius:6px;
}
button{
  background:#3b82f6;
  color:white;
  font-weight:bold;
}
a{
  color:#38bdf8;
  font-size:14px;
  text-decoration:none;
}
</style>

<!-- üî• Firebase Script MUST be module -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
    authDomain: "afnsclub.firebaseapp.com",
    projectId: "afnsclub",
    storageBucket: "afnsclub.firebasestorage.app",
    messagingSenderId: "1088089213558",
    appId: "1:1088089213558:web:bd5e01caaeecaa46bcad57"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  window.registerUser = async function () {
    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;
    const fb = document.getElementById("facebook").value.trim();
    const userId = document.getElementById("userid").value.trim();

    if(!name || !email || !password || !fb || !userId){
      alert("‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßã");
      return;
    }

    try{
      const userCred = await createUserWithEmailAndPassword(auth, email, password);
      const uid = userCred.user.uid;

      await setDoc(doc(db,"users",uid),{
        name: name,
        email: email,
        facebook: fb,
        userid: userId,
        createdAt: new Date()
      });

      alert("Account Created Successfully");
      window.location.href = "login.html";

    }catch(error){
      alert(error.message);
    }
  }
</script>
</head>

<body>
<div class="card">
  <h2>Create Player Account</h2>

  <input id="name" placeholder="Full Name">
  <input id="email" placeholder="Gmail">
  <input id="password" type="password" placeholder="Password">
  <input id="facebook" placeholder="Facebook Profile Link">
  <input id="userid" placeholder="Football User ID">

  <!-- ‚ùå form ‡¶®‡¶æ‡¶á | ‚úÖ direct onclick -->
  <button onclick="registerUser()">Register</button>

  <p style="text-align:center">
    <a href="login.html">Already have an account? Login</a>
  </p>
</div>
</body>
</html>
