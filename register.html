<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create Player Account | AFN's Elite Strikers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

  <style>
    body{
      margin:0;
      font-family:Arial, Helvetica, sans-serif;
      background: radial-gradient(circle at top, #0ff2, #000 70%);
      color:#fff;
    }
    .container{
      max-width:420px;
      margin:40px auto;
      padding:25px;
      background:rgba(0,0,0,0.6);
      border-radius:20px;
      box-shadow:0 0 25px #00f6ff;
    }
    .logo{
      display:block;
      width:120px;
      margin:0 auto 10px;
    }
    h2{
      text-align:center;
      color:#ffd700;
      margin-bottom:20px;
    }
    input{
      width:100%;
      padding:14px;
      margin-bottom:12px;
      border-radius:12px;
      border:none;
      outline:none;
      font-size:15px;
    }
    button{
      width:100%;
      padding:14px;
      border:none;
      border-radius:14px;
      background:linear-gradient(90deg,#00f6ff,#00c3ff);
      color:#000;
      font-size:18px;
      font-weight:bold;
      cursor:pointer;
    }
    button:active{transform:scale(0.98)}
    .msg{
      text-align:center;
      margin-top:12px;
      font-weight:bold;
    }
    .success{color:#00ff9d}
    .error{color:#ff4d4d}

    footer{
      margin-top:30px;
      text-align:center;
      opacity:.8;
      font-size:14px;
    }
    footer img{
      width:40px;
      display:block;
      margin:0 auto 5px;
    }
    footer a{
      color:#00f6ff;
      text-decoration:none;
    }
  </style>
</head>

<body>

<div class="container">
  <img src="logo.png" class="logo" alt="AFNS Logo">
  <h2>Create Player Account</h2>

  <input id="username" placeholder="Player Username">
  <input id="email" type="email" placeholder="Gmail">
  <input id="phone" placeholder="Mobile Number (Bangladesh)">
  <input id="facebook" placeholder="Facebook Profile Link">
  <input id="gameid" placeholder="Game / Owner ID">
  <input id="device" placeholder="Device Name">
  <input id="password" type="password" placeholder="Password">

  <button onclick="createAccount()">Create Account</button>

  <div id="message" class="msg"></div>
</div>

<footer class="global-footer">
  <img src="logo.png" alt="AFNS Logo">
  AFNs Elite Striker |
  <a href="https://www.facebook.com/share/1CTCywTQAj/" target="_blank">
    SI Shohan
  </a>
</footer>

<script>
/* üî• Firebase Config (YOURS) */
firebase.initializeApp({
  apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  authDomain:"afnsclub.firebaseapp.com",
  projectId:"afnsclub"
});

const auth = firebase.auth();
const db   = firebase.firestore();

/* ‚úÖ Create Account Function */
function createAccount(){
  const username = username.value.trim();
  const email    = email.value.trim();
  const phone    = phone.value.trim();
  const facebook = facebook.value.trim();
  const gameid   = gameid.value.trim();
  const device   = device.value.trim();
  const password = password.value.trim();
  const msg      = document.getElementById("message");

  msg.innerHTML = "";

  // Validation
  if(!username || !email || !phone || !facebook || !gameid || !device || !password){
    msg.innerHTML = "‚ö†Ô∏è All fields are required";
    msg.className = "msg error";
    return;
  }

  if(!/^01[3-9]\d{8}$/.test(phone)){
    msg.innerHTML = "‚ö†Ô∏è Invalid Bangladesh phone number";
    msg.className = "msg error";
    return;
  }

  msg.innerHTML = "‚è≥ Creating account...";
  msg.className = "msg";

  auth.createUserWithEmailAndPassword(email, password)
  .then(cred=>{
    return db.collection("players").doc(cred.user.uid).set({
      username,
      email,
      phone,
      facebook,
      gameId: gameid,
      device,
      rating:0,
      wins:0,
      losses:0,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    });
  })
  .then(()=>{
    msg.innerHTML = "‚úÖ Account created successfully!";
    msg.className = "msg success";
    setTimeout(()=>{ window.location.href="player.html"; },1500);
  })
  .catch(err=>{
    msg.innerHTML = "‚ùå " + err.message;
    msg.className = "msg error";
  });
}
</script>

</body>
  </html>
