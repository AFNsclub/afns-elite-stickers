<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Create Account</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,#050b1f,#0a1233);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
}
.box{
  width:100%;
  max-width:420px;
  background:rgba(255,255,255,.06);
  backdrop-filter:blur(10px);
  border-radius:16px;
  padding:26px;
  box-shadow:0 0 25px rgba(0,0,0,.6);
}
h2{text-align:center;margin:0 0 14px}
input{
  width:100%;
  padding:12px;
  margin-top:12px;
  border:none;
  border-radius:8px;
  outline:none;
}
.pass-wrap{position:relative}
.toggle{
  position:absolute;
  right:12px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
  font-size:13px;
  opacity:.7;
}
button{
  width:100%;
  margin-top:16px;
  padding:12px;
  border:none;
  border-radius:10px;
  background:#22c55e;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}
button:hover{opacity:.9}
.links{
  margin-top:12px;
  text-align:center;
  font-size:13px;
}
.links a{color:#a5b4fc;text-decoration:none}
.msg{
  margin-top:12px;
  font-size:14px;
  text-align:center;
}
.success{color:#22c55e}
.error{color:#ef4444}

footer{
  margin-top:18px;
  text-align:center;
  font-size:12px;
  opacity:.6;
}
footer img{height:24px}
footer a{color:#a5b4fc;text-decoration:none}
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  authDomain:"afnsclub.firebaseapp.com",
  projectId:"afnsclub"
});
</script>
</head>

<body>

<div class="box">
  <h2>Create Account</h2>

  <input type="text" id="name" placeholder="Player Name">

  <input type="email" id="email" placeholder="Email">

  <input type="text" id="phone" placeholder="Bangladesh Phone (01XXXXXXXXX)">

  <div class="pass-wrap">
    <input type="password" id="password" placeholder="Password (min 6)">
    <span class="toggle" onclick="togglePass()">Show</span>
  </div>

  <button onclick="register()">Create Account</button>

  <div class="links">
    <a href="login.html">Already have account? Login</a>
  </div>

  <div class="msg" id="msg"></div>

  <footer>
    <img src="logo.png"><br>
    AFNs Elite Striker |
    <a href="https://www.facebook.com/share/1CTCywTQAj/" target="_blank">
      SI Shohan
    </a>
  </footer>
</div>

<script>
const db = firebase.firestore();

function togglePass(){
  const p=password;
  if(p.type==="password"){
    p.type="text";
    document.querySelector(".toggle").innerText="Hide";
  }else{
    p.type="password";
    document.querySelector(".toggle").innerText="Show";
  }
}

function showMsg(t,type){
  msg.innerText=t;
  msg.className="msg "+type;
}

function validBDPhone(p){
  return /^01[0-9]{9}$/.test(p);
}

function register(){
  const n=name.value.trim();
  const e=email.value.trim();
  const p=password.value.trim();
  const ph=phone.value.trim();

  if(!n || !e || !p || !ph){
    showMsg("All fields required","error");
    return;
  }

  if(!validBDPhone(ph)){
    showMsg("Invalid Bangladesh phone number","error");
    return;
  }

  if(p.length<6){
    showMsg("Password minimum 6 characters","error");
    return;
  }

  firebase.auth()
    .createUserWithEmailAndPassword(e,p)
    .then(res=>{
      const uid=res.user.uid;

      return db.collection("players").doc(uid).set({
        uid:uid,
        name:n,
        email:e,
        phone:ph,
        gameId:"",
        device:"",
        fb:"",
        wins:0,
        losses:0,
        goals:0,
        gd:0,
        banned:false,
        banUntil:null,
        createdAt:firebase.firestore.FieldValue.serverTimestamp()
      });
    })
    .then(()=>{
      showMsg("Account created successfully âœ…","success");
      setTimeout(()=>{
        location.href="login.html";
      },1000);
    })
    .catch(err=>{
      showMsg(err.message,"error");
    });
}
</script>

</body>
</html>
