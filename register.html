<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Create Account</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}

body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:radial-gradient(circle at top,#0a1a4a,#050b1e 70%);
  color:#fff;
}

.container{
  width:100%;
  max-width:400px;
  background:rgba(255,255,255,.06);
  backdrop-filter:blur(12px);
  padding:26px;
  border-radius:16px;
  box-shadow:0 0 30px rgba(0,0,0,.6);
}

h2{text-align:center;margin-bottom:6px}
.sub{text-align:center;font-size:13px;color:#a5b4fc;margin-bottom:18px}

input{
  width:100%;
  padding:12px;
  margin-bottom:12px;
  border:none;
  border-radius:8px;
  font-size:14px;
}

.pass-box{position:relative}
.toggle{
  position:absolute;
  right:10px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
  font-size:13px;
  color:#4f8cff;
}

button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:8px;
  background:#4f8cff;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}

button:hover{box-shadow:0 0 12px rgba(79,140,255,.6)}

.msg{
  margin-bottom:12px;
  font-size:13px;
  text-align:center;
  display:none;
}
.msg.error{color:#ff6b6b}
.msg.success{color:#22c55e}

.links{
  text-align:center;
  margin-top:10px;
  font-size:13px;
}
.links a{color:#a5b4fc;text-decoration:none}

footer{
  text-align:center;
  font-size:12px;
  opacity:.6;
  margin-top:16px;
}
</style>

<!-- ===== FIREBASE ===== -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  authDomain:"afnsclub.firebaseapp.com",
  projectId:"afnsclub"
});
</script>
</head>

<body>

<div class="container">

  <h2>Create Account</h2>
  <div class="sub">Join AFNS Elite Striker</div>

  <div id="msg" class="msg"></div>

  <input id="name" placeholder="Full Name">
  <input id="phone" placeholder="Bangladesh Phone (+8801XXXXXXXXX)">
  <input id="email" type="email" placeholder="Email">

  <div class="pass-box">
    <input id="password" type="password" placeholder="Password (min 6)">
    <span class="toggle" onclick="togglePass()">SHOW</span>
  </div>

  <button onclick="register()">Create Account</button>

  <div class="links">
    Already have an account? <a href="index.html">Login</a>
  </div>

  <footer>SI Shohan â€¢ AFNS Club</footer>
</div>

<script>
const auth=firebase.auth();
const db=firebase.firestore();
const msg=document.getElementById("msg");

function show(text,type){
  msg.textContent=text;
  msg.className="msg "+type;
  msg.style.display="block";
}

function togglePass(){
  const p=document.getElementById("password");
  const t=document.querySelector(".toggle");
  if(p.type==="password"){p.type="text";t.textContent="HIDE"}
  else{p.type="password";t.textContent="SHOW"}
}

function validBD(phone){
  return /^(\+8801|01)[0-9]{9}$/.test(phone);
}

function register(){
  const name=nameInput.value=name.value.trim();
  const phoneVal=phone.value.trim();
  const emailVal=email.value.trim();
  const passVal=password.value;

  if(!name||!phoneVal||!emailVal||!passVal){
    show("All fields required","error");return;
  }
  if(!validBD(phoneVal)){
    show("Invalid Bangladesh phone number","error");return;
  }
  if(passVal.length<6){
    show("Password minimum 6 characters","error");return;
  }

  auth.createUserWithEmailAndPassword(emailVal,passVal)
  .then(res=>{
    const uid=res.user.uid;
    return db.collection("players").doc(uid).set({
      uid,
      name,
      phone:phoneVal,
      email:emailVal,
      createdAt:firebase.firestore.FieldValue.serverTimestamp(),
      banned:false,
      banUntil:null,
      wins:0,losses:0,goals:0,gd:0
    });
  })
  .then(()=>{
    show("Account created successfully","success");
    setTimeout(()=>location.href="player.html",1200);
  })
  .catch(e=>show(e.message,"error"));
}
</script>

</body>
</html>
