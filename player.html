<!DOCTYPE html>
<html>
<head>
  <title>Player Panel</title>
</head>
<body>

<h2>Player Panel</h2>

<div id="profile"></div>

<br>
<button onclick="location.href='edit-profile.html'">Edit Profile</button>
<button id="logout">Logout</button>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_DOMAIN",
  projectId: "YOUR_PROJECT_ID"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

onAuthStateChanged(auth, async (user) => {
  if (!user) {
    location.href = "login.html";
    return;
  }

  const snap = await getDoc(doc(db, "players", user.uid));

  if (!snap.exists()) {
    profile.innerHTML = "Profile not found";
    return;
  }

  const d = snap.data();

  profile.innerHTML = `
    <p><b>Player Name:</b> ${d.name || "-"}</p>
    <p><b>Owner ID:</b> ${d.ownerId || "-"}</p>
    <p><b>Device:</b> ${d.device || "-"}</p>
    <p><b>Gmail:</b> ${user.email}</p>
    <p><b>Phone:</b> ${d.phone || "-"}</p>
    <p><b>Facebook:</b> <a href="${d.fb || '#'}" target="_blank">${d.fb || "-"}</a></p>
  `;
});

logout.onclick = () => signOut(auth);
</script>

</body>
</html>
