<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Player Profile</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,#050b1f,#0a1233);
  color:#fff;
}
.container{
  max-width:420px;
  margin:40px auto;
  background:rgba(255,255,255,.06);
  backdrop-filter:blur(10px);
  border-radius:16px;
  padding:22px;
  box-shadow:0 0 25px rgba(0,0,0,.6);
}
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.header h2{margin:0}
.logout{
  background:#ff4d4d;
  border:none;
  color:#fff;
  padding:6px 12px;
  border-radius:8px;
  cursor:pointer;
}
.motivation{
  margin:14px 0;
  padding:10px;
  border-radius:10px;
  background:rgba(59,130,246,.15);
  text-align:center;
  font-size:14px;
}
.avatar{
  width:70px;
  height:70px;
  border-radius:50%;
  background:#3b82f6;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:30px;
  font-weight:bold;
  margin:10px auto;
}
.name{
  text-align:center;
  font-size:20px;
  font-weight:bold;
}
.rank{
  text-align:center;
  margin-top:6px;
  color:#a5b4fc;
}
.card{
  margin-top:16px;
  background:rgba(255,255,255,.05);
  padding:14px;
  border-radius:12px;
}
.card p{
  margin:6px 0;
  font-size:14px;
}
.card span{
  color:#a5b4fc;
}
.stats{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
  margin-top:14px;
}
.stat{
  background:rgba(255,255,255,.05);
  padding:10px;
  border-radius:10px;
  text-align:center;
}
.stat b{display:block}
button{
  width:100%;
  margin-top:14px;
  padding:12px;
  border:none;
  border-radius:10px;
  background:#22c55e;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}
button:hover{box-shadow:0 0 14px rgba(34,197,94,.6)}
form input{
  width:100%;
  padding:11px;
  margin-top:10px;
  border:none;
  border-radius:8px;
}
footer{
  margin-top:18px;
  text-align:center;
  font-size:12px;
  opacity:.6;
}
footer img{
  height:24px;
  vertical-align:middle;
}
footer a{color:#a5b4fc;text-decoration:none}
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  authDomain:"afnsclub.firebaseapp.com",
  projectId:"afnsclub"
});
</script>
</head>

<body>

<div class="container">
  <div class="header">
    <h2>Player Profile</h2>
    <button class="logout" onclick="logout()">Logout</button>
  </div>

  <div class="motivation" id="motivation"></div>

  <div class="avatar" id="avatar">P</div>
  <div class="name" id="playerName">Player</div>
  <div class="rank" id="rankText">#â€“</div>

  <div class="card">
    <p>ðŸ“ž Phone: <span id="phoneText">â€”</span></p>
    <p>ðŸ“§ Email: <span id="emailText">â€”</span></p>
    <p>ðŸŽ® Game ID: <span id="gameIdText">â€”</span></p>
    <p>ðŸ“± Device: <span id="deviceText">â€”</span></p>
    <p>ðŸ”— Facebook: <a id="fbLink" target="_blank">Profile</a></p>
  </div>

  <div class="stats">
    <div class="stat"><b id="wins">0</b>Wins</div>
    <div class="stat"><b id="losses">0</b>Loss</div>
    <div class="stat"><b id="goals">0</b>Goals</div>
    <div class="stat"><b id="gd">0</b>GD</div>
  </div>

  <button onclick="editMode()">Edit Profile</button>

  <form id="editForm" style="display:none">
    <input id="nameInput" placeholder="Name">
    <input id="phoneInput" placeholder="Bangladesh Phone (+880...)">
    <input id="gameIdInput" placeholder="Game ID">
    <input id="deviceInput" placeholder="Device">
    <input id="fbInput" placeholder="Facebook link">
    <button type="button" onclick="save()">Save Profile</button>
  </form>

  <footer>
    <img src="logo.png"> <br>
    AFNs Elite Striker |
    <a href="https://www.facebook.com/share/1CTCywTQAj/" target="_blank">
      SI Shohan
    </a>
  </footer>
</div>

<script>
const auth=firebase.auth();
const db=firebase.firestore();

/* MOTIVATION */
const MOTIVATIONS=[
"Train hard, win easy.",
"No excuses, only results.",
"Discipline beats talent.",
"One goal can change everything.",
"Stay calm. Finish strong.",
"Every match matters.",
"Respect the game.",
"Focus. Fight. Finish."
];

function dailyMotivation(uid){
  const d=new Date().toISOString().slice(0,10);
  let h=0;for(let c of uid+d)h=c.charCodeAt(0)+((h<<5)-h);
  return MOTIVATIONS[Math.abs(h)%MOTIVATIONS.length];
}

auth.onAuthStateChanged(user=>{
  if(!user){location.href="login.html";return;}
  const uid=user.uid;

  db.collection("players").doc(uid).get().then(doc=>{
    if(!doc.exists)return;
    const d=doc.data();

    motivation.textContent=dailyMotivation(uid);
    playerName.textContent=d.name||"Player";
    avatar.textContent=(d.name||"P")[0].toUpperCase();
    rankText.textContent="#"+(d.rank||"â€”");

    phoneText.textContent=d.phone||"â€”";
    emailText.textContent=user.email;
    gameIdText.textContent=d.gameId||"â€”";
    deviceText.textContent=d.device||"â€”";
    fbLink.href=d.fb||"#";

    wins.textContent=d.wins||0;
    losses.textContent=d.losses||0;
    goals.textContent=d.goals||0;
    gd.textContent=d.gd||0;

    nameInput.value=d.name||"";
    phoneInput.value=d.phone||"";
    gameIdInput.value=d.gameId||"";
    deviceInput.value=d.device||"";
    fbInput.value=d.fb||"";
  });
});

function editMode(){
  editForm.style.display="block";
}

function save(){
  const uid=auth.currentUser.uid;
  db.collection("players").doc(uid).update({
    name:nameInput.value,
    phone:phoneInput.value,
    gameId:gameIdInput.value,
    device:deviceInput.value,
    fb:fbInput.value
  }).then(()=>location.reload());
}

function logout(){
  auth.signOut().then(()=>location.href="login.html");
}
</script>

</body>
</html>
