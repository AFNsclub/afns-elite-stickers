<!DOCTYPE html>
<html>
<head>
<title>My Profile</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
<div class="notice" id="motivation"></div>

<h2 id="name"></h2>

<div class="profile-box">
<p>Email: <span id="email"></span></p>
<p>Phone: <span id="phone"></span></p>
<p>Game ID: <span id="gameId"></span></p>
<p>Device: <span id="device"></span></p>
</div>

<h2>Edit Profile</h2>
<input id="e_name" placeholder="Username">
<input id="e_phone" placeholder="Phone">
<input id="e_fb" placeholder="Facebook">
<input id="e_game" placeholder="Game ID">
<input id="e_device" placeholder="Device">
<button onclick="save()">Save</button>
<button class="logout" onclick="auth.signOut()">Logout</button>
</div>

<footer class="global-footer">
<img src="logo.png" class="footer-logo">
AFNs Elite Striker |
<a href="https://www.facebook.com/share/1CTCywTQAj/" target="_blank">SI Shohan</a>
</footer>

<script src="firebase.js"></script>
<script>
const quotes=[
"Discipline beats talent.",
"One match can change everything.",
"Play smart. Stay elite."
];
motivation.innerText=quotes[Math.floor(Math.random()*quotes.length)];

auth.onAuthStateChanged(u=>{
 if(!u){location.href="login.html";return;}
 db.collection("players").doc(u.uid).onSnapshot(d=>{
  const p=d.data();
  name.innerText=p.username;
  email.innerText=p.email;
  phone.innerText=p.phone;
  gameId.innerText=p.gameId;
  device.innerText=p.device;
  e_name.value=p.username;
  e_phone.value=p.phone;
  e_fb.value=p.facebook;
  e_game.value=p.gameId;
  e_device.value=p.device;
 });
});
function save(){
 auth.currentUser && db.collection("players")
 .doc(auth.currentUser.uid)
 .update({
  username:e_name.value,
  phone:e_phone.value,
  facebook:e_fb.value,
  gameId:e_game.value,
  device:e_device.value
 });
 alert("Saved");
}
</script>
</body>
</html>
