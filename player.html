<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Profile</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{
  margin:0;
  min-height:100vh;
  background:radial-gradient(circle at top,#0a1a4a,#050b1e 70%);
  color:#fff;
}
.container{
  max-width:420px;
  margin:40px auto;
  background:rgba(255,255,255,.06);
  backdrop-filter:blur(12px);
  border-radius:18px;
  padding:22px;
  box-shadow:0 0 30px rgba(0,0,0,.6);
}
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.header h2{margin:0;font-size:20px}
.logout{
  background:none;
  border:1px solid #ff6b6b;
  color:#ff6b6b;
  padding:6px 12px;
  border-radius:8px;
  cursor:pointer;
}
.motivation{
  margin:16px 0;
  padding:12px;
  border-radius:10px;
  background:linear-gradient(135deg,#1e3a8a,#2563eb);
  font-weight:bold;
  text-align:center;
  box-shadow:0 0 15px rgba(37,99,235,.6);
}
.avatar{
  width:60px;height:60px;
  border-radius:50%;
  background:#4f8cff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  font-weight:bold;
  margin:10px auto;
}
.name{text-align:center;font-size:18px;font-weight:bold}
.rank{text-align:center;color:#a5b4fc;margin-bottom:12px}

.card p{margin:8px 0;font-size:14px}
.card span{color:#a5b4fc;font-weight:bold}

button{
  width:100%;
  margin-top:12px;
  padding:11px;
  border:none;
  border-radius:8px;
  background:#4f8cff;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}
button.save{background:#22c55e}
.hidden{display:none}

input{
  width:100%;
  padding:11px;
  margin-top:8px;
  border-radius:8px;
  border:none;
}

.ban{
  background:#7f1d1d;
  padding:12px;
  border-radius:10px;
  text-align:center;
  margin-bottom:12px;
  box-shadow:0 0 20px rgba(220,38,38,.6);
}

footer{
  text-align:center;
  font-size:12px;
  opacity:.6;
  margin-top:18px;
}
</style>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  authDomain:"afnsclub.firebaseapp.com",
  projectId:"afnsclub"
});
</script>
</head>

<body>

<div class="container">

  <div class="header">
    <h2>My Profile</h2>
    <button class="logout" onclick="logout()">Logout</button>
  </div>

  <div id="banBox" class="ban hidden"></div>

  <div class="motivation" id="motivation"></div>

  <div class="avatar" id="avatar">P</div>
  <div class="name" id="playerName">Player</div>
  <div class="rank" id="rankText">#—</div>

  <div class="card" id="viewBox">
    <p>Phone: <span id="vPhone"></span></p>
    <p>Email: <span id="vEmail"></span></p>
    <p>Game ID: <span id="vGame"></span></p>
    <p>Device: <span id="vDevice"></span></p>
    <p>Facebook: <a id="vFb" target="_blank">Link</a></p>
    <button onclick="edit()">Edit Profile</button>
  </div>

  <div class="card hidden" id="editBox">
    <input id="eName" placeholder="Name">
    <input id="ePhone" placeholder="BD Phone">
    <input id="eGame" placeholder="Game / Owner ID">
    <input id="eDevice" placeholder="Device">
    <input id="eFb" placeholder="Facebook link">
    <button class="save" onclick="save()">Save</button>
  </div>

  <footer>
    <img src="logo.png" height="26"><br>
    AFNs Elite Striker |
    <a href="https://www.facebook.com/share/1CTCywTQAj/" target="_blank">SI Shohan</a>
  </footer>

</div>

<script>
const auth=firebase.auth();
const db=firebase.firestore();

const MOTIVATIONS=[
"Train hard, win easy.",
"No excuses, only results.",
"Every match matters.",
"Discipline beats talent.",
"One goal can change everything.",
"Winners never quit.",
"Stay calm. Finish strong."
];

auth.onAuthStateChanged(user=>{
  if(!user){location.href="index.html";return;}
  const uid=user.uid;

  db.collection("players").doc(uid).onSnapshot(doc=>{
    if(!doc.exists) return;
    const d=doc.data();

    // BAN
    if(d.banned && d.banUntil){
      const until=d.banUntil.toDate();
      banBox.classList.remove("hidden");
      tickBan(until);
    }

    playerName.textContent=d.name;
    avatar.textContent=d.name.charAt(0).toUpperCase();
    vPhone.textContent=d.phone||"—";
    vEmail.textContent=d.email||"—";
    vGame.textContent=d.gameId||"—";
    vDevice.textContent=d.device||"—";
    vFb.href=d.fb||"#";

    eName.value=d.name||"";
    ePhone.value=d.phone||"";
    eGame.value=d.gameId||"";
    eDevice.value=d.device||"";
    eFb.value=d.fb||"";

    motivation.textContent=MOTIVATIONS[
      Math.floor(Math.random()*MOTIVATIONS.length)
    ];
  });
});

function tickBan(until){
  setInterval(()=>{
    const diff=until-new Date();
    if(diff<=0){banBox.textContent="Ban expired";return;}
    const h=Math.floor(diff/36e5);
    const m=Math.floor(diff%36e5/6e4);
    const s=Math.floor(diff%6e4/1e3);
    banBox.textContent=`BANNED ⛔ Remaining ${h}h ${m}m ${s}s`;
  },1000);
}

function edit(){
  viewBox.classList.add("hidden");
  editBox.classList.remove("hidden");
}

function validBD(p){
  return /^(\+8801|01)[0-9]{9}$/.test(p);
}

function save(){
  if(!validBD(ePhone.value)){
    alert("Invalid Bangladesh phone");return;
  }
  const uid=auth.currentUser.uid;
  db.collection("players").doc(uid).update({
    name:eName.value,
    phone:ePhone.value,
    gameId:eGame.value,
    device:eDevice.value,
    fb:eFb.value
  }).then(()=>{
    viewBox.classList.remove("hidden");
    editBox.classList.add("hidden");
  });
}

function logout(){
  auth.signOut().then(()=>location.href="index.html");
}
</script>

</body>
      </html>
