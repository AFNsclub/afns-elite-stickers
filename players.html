<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Players</title>
<meta name="viewport" content="width=device-width">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{
  background:#050b1e;
  color:#fff;
  font-family:Segoe UI;
}
.container{
  max-width:480px;
  margin:auto;
  padding:20px;
}
input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  margin-bottom:14px;
}
.player{
  padding:12px;
  background:rgba(255,255,255,.06);
  border-radius:14px;
  margin-bottom:10px;
  cursor:pointer;
  font-weight:600;
}
.player:hover{
  background:rgba(0,234,255,.15);
}
</style>
</head>

<body>
<div class="container">
  <input id="search" placeholder="Search player...">
  <div id="list"></div>
</div>

<script>
/* ðŸ”¥ FIREBASE INIT */
firebase.initializeApp({
  apiKey: "AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  authDomain: "afnsclub.firebaseapp.com",
  projectId: "afnsclub"
});

const db = firebase.firestore();
let allPlayers = [];

/* ðŸ”„ LOAD PLAYERS */
db.collection("players").onSnapshot(snapshot => {
  allPlayers = [];
  snapshot.forEach(doc => {
    allPlayers.push({
      uid: doc.id,
      ...doc.data()
    });
  });
  renderPlayers(allPlayers);
});

/* ðŸ” SEARCH */
search.addEventListener("input", () => {
  const q = search.value.toLowerCase().trim();
  renderPlayers(
    allPlayers.filter(p =>
      (p.username || "").toLowerCase().includes(q)
    )
  );
});

/* ðŸ§¾ RENDER LIST */
function renderPlayers(players){
  list.innerHTML = "";
  players.forEach(p => {
    const div = document.createElement("div");
    div.className = "player";
    div.textContent = p.username || "Player";
    div.onclick = () => {
      location.href = "public-profile.html?uid=" + p.uid;
    };
    list.appendChild(div);
  });
}
</script>
</body>
</html>
