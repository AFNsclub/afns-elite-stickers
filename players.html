<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Players</title>
<meta name="viewport" content="width=device-width">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{background:#050b1e;color:#fff;font-family:Segoe UI}
.container{max-width:480px;margin:auto;padding:20px}
input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  margin-bottom:14px;
}
.player{
  padding:12px;
  background:rgba(255,255,255,.06);
  border-radius:14px;
  margin-bottom:10px;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="container">
  <input id="search" placeholder="Search player...">
  <div id="list"></div>
</div>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBtDxu0LJyb10ZkhH8IpxT5s8PcKc4nUxM",
  authDomain:"afnsclub.firebaseapp.com",
  projectId:"afnsclub"
});

const db=firebase.firestore();
let all=[];

db.collection("players").onSnapshot(snap=>{
  all=[];
  snap.forEach(d=>all.push({uid:d.id,...d.data()}));
  render(all);
});

search.oninput=()=>{
  const q=search.value.toLowerCase();
  render(all.filter(p=>(p.name||"").toLowerCase().includes(q)));
};

function render(arr){
  list.innerHTML="";
  arr.forEach(p=>{
    const d=document.createElement("div");
    d.className="player";
    d.textContent=p.name||"Player";
    d.onclick=()=>location.href="public-profile.html?uid="+p.uid;
    list.appendChild(d);
  });
}
</script>
</body>
</html>
